# .github/workflows/cache-workflow.yml

name: Demonstrate Dependency Caching

# This action runs on push to the main branch or can be triggered manually
on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository code
        uses: actions/checkout@v4

      # --- This is the main caching step ---
      - name: Cache dependencies
        id: cache-step # We give this step an ID to reference its output later
        uses: actions/cache@v4
        with:
          # The path to the folder or file we want to cache.
          # We will create this file in the next step if the cache is missed.
          path: dummy_dependencies
          # The exact key required by the prompt
          key: cache-fa01e5b

      # --- This step runs ONLY if the cache was not found ---
      # It "primes the cache" by creating the content that will be stored.
      - name: Create dependency file (if cache missed)
        if: steps.cache-step.outputs.cache-hit != 'true'
        run: |
          echo "Cache not found. Creating dummy dependency file now..."
          echo "This content was generated during the initial run." > dummy_dependencies

      # --- THIS IS THE REQUIRED VERIFICATION STEP ---
      # It has the required name and echoes the cache hit/miss status.
      - name: prime-cache-fa01e5b
        run: echo "The cache hit status was: ${{ steps.cache-step.outputs.cache-hit }}"

      # Optional step to prove the file exists
      - name: Verify file content
        run: |
          echo "---"
          echo "Content of the dummy_dependencies file:"
          cat dummy_dependencies
          echo "---"